// ARCANE BLAST

new entry "Projectile_ArcaneBolt"
type "SpellData"
data "SpellType" "Projectile"
data "Level" "0"
data "SpellSchool" "Conjuration"
data "TargetRadius" "12"
data "SpellProperties" "IF(Combat()):RegainHitPoints(LevelMapValue(D6Cantrip));IF(HasStatus('STORED_ESSENCE')):ApplyStatus(SWAP, RESTORE_ESSENCE, 100, 0);RemoveStatus(STORED_ESSENCE)"
data "TargetConditions" "HasStatus('ISRITUALISTSUMMON') and not Dead()"
data "ProjectileCount" "1"
data "Trajectories" "c0cd820b-c32c-4ffa-b4b0-5cde60ecc2ae"
//data "Icon" "Spell_Evocation_WitchBolt"
data "Icon" "RIT_Skill_ArcaneBlast"
data "DisplayName" "hacrc001bla00000000000000000000000001;1"
data "Description" "hacrc001bla00000000000000000000000002;3"
data "CastSound" "CrSpell_Cast_SypnaticDischarge"
data "CastTextEvent" "Cast"
data "CycleConditions" "HasStatus('ISRITUALISTSUMMON') and not Dead()"
data "PrepareSound" "Spell_Prepare_Control_Gen_L1to3_01"
data "PrepareLoopSound" "Spell_Prepare_Control_Gen_L1to3_01_Loop"
data "UseCosts" "BonusActionPoint:1"
data "SpellAnimation" "73afb4e5-8cfe-4479-95cf-16889597fee3,,;7e67bfd0-2fc2-4d10-bed5-cfda9e660de5,,;eb054308-7fce-4b85-bf4c-7a0031fda7ac,,;0b0dc35b-4953-45c0-a9eb-8d3fef5e798a,,;6ec808e1-e128-44ef-9361-a713bf86de8f,,;,,;f920a0a6-f257-4ce4-8d17-2dcaa7bb7bbb,,;,,;,,"
data "VerbalIntent" "Buff"
data "SpellFlags" "HasSomaticComponent;IsSpell"
data "HitAnimationType" "MagicalDamage_Force"
data "SpellAnimationIntentType" ""
data "PrepareEffect" "4d8b4ab5-04d2-47ee-bcd8-bb3e2c4c8847"
data "CastEffect" "58acaf6d-7002-4fa5-8671-d290a7103155"

new entry "Target_ArcaneStrike"
type "SpellData"
data "SpellType" "Target"
using "Target_PiercingThrust"
data "Level" "0"
data "SpellSchool" "Conjuration"
data "SpellSuccess" "IF(Character() and not HasStatus('ISRITUALISTSUMMON')):DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType);IF(HasStatus('ISRITUALISTSUMMON')):RegainHitPoints(LevelMapValue(D4Cantrip));IF(Character() and not HasStatus('ISRITUALISTSUMMON')):ExecuteWeaponFunctors(MainHand);IF(HasStatus('STORED_ESSENCE')):ApplyStatus(SWAP, RESTORE_ESSENCE, 100, 0);RemoveStatus(STORED_ESSENCE)"
//data "Icon" "PassiveFeature_EldritchStrike"
data "Icon" "RIT_Skill_ArcaneStrike"
data "DisplayName" "hacrc003bla00000000000000000000000001;1"
data "Description" "hacrc003bla00000000000000000000000002;1"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"
data "TooltipAttackSave" "MeleeWeaponAttack"
data "TooltipStatusApply" ""
data "Cooldown" ""
data "PrepareSound" "Action_Prepare_Weapon_Taxblade"
data "PrepareLoopSound" "Action_Loop_Weapon_Taxblade"
data "CastSound" "Action_Cast_PommelStrike"
data "SpellFlags" "IsSpell;IsMelee;IsHarmful;IsDefaultWeaponAction"
data "SpellAnimation" "5dbfc67e-a1f4-4a91-b398-4df1ad989c49,,;6f957f78-322e-465f-b314-27299a98add7,,;63c0501c-14aa-467c-8980-45ed023ab15d,,;e6af1757-da0b-4640-8ce5-ea559816d2b0,,;08e862c4-75d3-489d-bdb2-b2f95031373e,,;3ed0eebd-86d0-4902-bcea-e0b039e9ad1f,,;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
data "PrepareEffect" "4d8b4ab5-04d2-47ee-bcd8-bb3e2c4c8847"
data "TargetEffect" "80d3ad8f-f14f-406b-b851-501dae1d5de3"
data "HitEffect" "501957b2-c700-4105-bdcd-4fbe0dc0b959"
data "Sheathing" "Melee"

new entry "Projectile_ConduitBlast_Incarnate"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_ThrowMissile"
data "Cooldown" ""
data "TargetRadius" "6"
data "DeathType" ""
data "TargetConditions" "not HasStatus('ISRITUALISTSUMMON') and Enemy() and not Dead()"
data "SpellRoll" "not SavingThrow(Ability.Dexterity, CalculateSpellDC(context.PreferredCastingAbility, GetSummoner(context.Source)))"
data "SpellSuccess" "DealDamage(LevelMapValue(D10Cantrip),Force,Magical);ApplyStatus(MAG_ATTACK_DEBUFF,100,2)"
data "ProjectileCount" "1"
data "Trajectories" "c0cd820b-c32c-4ffa-b4b0-5cde60ecc2ae"
data "Icon" "Spell_Conjuration_ProduceFlame_Hurl"
data "DisplayName" "hacrc001bla00000000000000000000000003;1"
data "Description" "hacrc001bla00000000000000000000000002;3"
data "CastSound" "CrSpell_Cast_SypnaticDischarge"
data "CastTextEvent" "Cast"
data "PrepareSound" "Spell_Prepare_Control_Gen_L1to3_01"
data "PrepareLoopSound" "Spell_Prepare_Control_Gen_L1to3_01_Loop"
data "SpellAnimation" "73afb4e5-8cfe-4479-95cf-16889597fee3,,;7e67bfd0-2fc2-4d10-bed5-cfda9e660de5,,;eb054308-7fce-4b85-bf4c-7a0031fda7ac,,;0b0dc35b-4953-45c0-a9eb-8d3fef5e798a,,;6ec808e1-e128-44ef-9361-a713bf86de8f,,;,,;f920a0a6-f257-4ce4-8d17-2dcaa7bb7bbb,,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "HasSomaticComponent;IsSpell;IsHarmful"
data "HitAnimationType" "MagicalDamage_Force"
data "SpellAnimationIntentType" "Aggressive"
data "PrepareEffect" "4d8b4ab5-04d2-47ee-bcd8-bb3e2c4c8847"
data "CastEffect" "58acaf6d-7002-4fa5-8671-d290a7103155"

new entry "Projectile_RitualCast_Fx"
type "SpellData"
data "SpellType" "Projectile"
data "TargetRadius" "15"
data "SpellProperties" "GROUND:Summon(f6a01589-328a-43ae-8e68-782d79852c94, 1,,,,)"
data "TargetConditions" "HasStatus('RITUALIST_AURA')"
data "ProjectileCount" "1"
data "DisplayName" "hacrc001bla00000000000000000000000001"
data "SpellAnimation" "3ff87abf-1ea1-4c32-aadf-c822d74c7dc0,,;,,;38cdb41c-2eec-4e03-bb31-83cff0346c35,,;85414f5f-b448-4dda-9370-1b6c4b38b561,,;d8925ce4-d6d9-400c-92f5-ad772ef7f178,,;,,;eadedcce-d01b-4fbb-a1ae-d218f13aa5d6,,;,,;,,"
data "VerbalIntent" "Utility"
data "SpellFlags" "ImmediateCast"
data "Trajectories" "2843a8e8-3204-46de-84a0-6556c1f72a9b,e283e585-168c-9641-a280-ea1bac2372b0"


// RITUAL WEAPON

new entry "Target_RIT_RitualWeapon"
type "SpellData"
data "SpellType" "Target"
data "SpellProperties" "ApplyStatus(BLEEDING,100,2);GROUND:Summon(f6a01589-328a-43ae-8e68-782d79852c94, 1,,,,);ApplyEquipmentStatus(SELF,MainHand,RIT_RITUAL_WEAPON,100,-1);ApplyStatus(SELF, RIT_RITUAL_WEAPON_CASTER,100, -1);IF(HasStatus('Aspect_Lich_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand,RIT_RITUAL_WEAPON_NECROTIC,100, -1);IF(HasStatus('Aspect_Demon_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand, RIT_RITUAL_WEAPON_FIRE,100, -1);IF(HasStatus('Aspect_Shadow_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand, RIT_RITUAL_WEAPON_PSYCHIC,100, -1);IF(HasStatus('Aspect_Bheur_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand, RIT_RITUAL_WEAPON_COLD,100, -1);IF(HasStatus('Aspect_Fey_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand, RIT_RITUAL_WEAPON_POISON,100, -1);IF(HasStatus('Aspect_Angel_Caster',context.Source)):ApplyEquipmentStatus(SELF,MainHand, RIT_RITUAL_WEAPON_RADIANT,100, -1)"
data "TargetRadius" "1.5"
data "TargetConditions" "IsTargetableCorpse() or Enemy() or Ally() or Self()"
data "Icon" "RIT_Skill_RitualWeapon"
data "DisplayName" "hacrc002bla00000000000000000000000001;2"
data "Description" "hacrc002bla00000000000000000000000002;4"
//data "Icon" "PassiveFeature_WarMagic"
data "CastTextEvent" "Cast"
data "UseCosts" "ActionPoint:1"
data "SpellAnimation" "2ba949b7-0329-4190-992c-11b0d29183c5,,;,,;1ddf9200-f60c-403f-b61c-ba41277c160d,624022e7-081d-414a-be52-b6927e01666c,95434012-e43d-4d77-a60d-616fbe0df3ca;,,;a0503ad0-c1b1-449c-b431-4ac6c39c58d7,,;,,;0b07883a-08b8-43b6-ac18-84dc9e84ff50,,;,,;,,"
data "VerbalIntent" "Utility"
data "SpellAnimationIntentType" "Aggressive"
data "RequirementConditions" "not Unarmed()"
data "PrepareEffect" "8e9914c9-7008-4252-ab31-a9776c444194"
data "CastEffect" "fc23a5a6-f05b-40c3-8e0f-99377cfb04cc"
data "Sheathing" "Melee"

new entry "RIT_RITUAL_WEAPON"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hacrc002bla00000000000000000000000001;1"
data "Description" "hacrc002bla00000000000000000000000003;1"
data "DescriptionParams" "1"
data "Icon" "RIT_Skill_RitualWeapon"
data "SoundLoop" ""
data "SoundStop" "Spell_Status_MagicWeapon_MO_Stop"
data "StackId" "RIT_RITUAL_WEAPON"
data "StackPriority" "0"
data "IsUnique" "1"
data "Boosts" "WeaponAttackRollAbilityOverride(SpellCastingAbility);IntrinsicSummonerProficiency();IntrinsicSourceProficiency();WeaponProperty(Magical);WeaponDamageDieOverride(1d10)"
data "OnRemoveFunctors" "RemoveStatus(RIT_RITUAL_WEAPON_NECROTIC);RemoveStatus(RIT_RITUAL_WEAPON_FIRE);RemoveStatus(RIT_RITUAL_WEAPON_PSYCHIC);RemoveStatus(RIT_RITUAL_WEAPON_COLD);RemoveStatus(RIT_RITUAL_WEAPON_POISON);RemoveStatus(RIT_RITUAL_WEAPON_RADIANT)"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusPropertyFlags" "FreezeDuration;IgnoreResting"
data "Passives" "EssenceOnKill_Melee"

new entry "RIT_RITUAL_WEAPON_DEFAULT"
type "StatusData"
data "StatusType" "BOOST"
data "StackId" "RIT_RITUAL_WEAPON_ELEMENT"
data "StatusPropertyFlags" "DisableCombatlog;DisableOverhead;DisablePortraitIndicator;FreezeDuration;IgnoreResting"

new entry "RIT_RITUAL_WEAPON_NECROTIC"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Necrotic)"
data "StatusEffectOverride" "d3bb6318-83bc-4db6-9ec5-525afbc5fab3"

new entry "RIT_RITUAL_WEAPON_NECROTIC_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source) and not SavingThrow(Ability.Constitution, 18)):ApplyStatus(FESTERING_WOUND,100,1)"

new entry "RIT_RITUAL_WEAPON_FIRE"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Fire)"
data "Passives" "RIT_RITUAL_WEAPON_FIRE_PASSIVE"
data "StatusEffectOverride" "44d77ebf-fc9e-407d-b20f-257019351f2a"

new entry "RIT_RITUAL_WEAPON_FIRE_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source) and not SavingThrow(Ability.Constitution, 18)):ApplyStatus(BURNING,100,1)"

new entry "RIT_RITUAL_WEAPON_PSYCHIC"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Psychic);WeaponDamage(2,Psychic)"
data "Passives" ""
data "StatusEffectOverride" "3c6fe975-8eb9-481b-a116-00278a707935"

new entry "RIT_RITUAL_WEAPON_PSYCHIC_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source)):DealDamage(2,Psychic)"

new entry "RIT_RITUAL_WEAPON_COLD"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Cold);WeaponDamage(2,Bludgeoning)"
data "Passives" ""
data "StatusEffectOverride" "62318bbf-d36a-497c-91a4-bda8f7fb7af7"

new entry "RIT_RITUAL_WEAPON_COLD_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source)):DealDamage(2,Bludgeoning)"

new entry "RIT_RITUAL_WEAPON_POISON"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Poison)"
data "Passives" "RIT_RITUAL_WEAPON_POISON_PASSIVE"
data "StatusEffectOverride" "86b94e03-b0d5-46aa-9045-88cdc5aeff47"

new entry "RIT_RITUAL_WEAPON_POISON_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source) and not SavingThrow(Ability.Wisdom, 15)):ApplyStatus(FAERIE_FIRE,100,2)"

new entry "RIT_RITUAL_WEAPON_RADIANT"
type "StatusData"
data "StatusType" "BOOST"
using "RIT_RITUAL_WEAPON_DEFAULT"
data "Boosts" "WeaponDamageTypeOverride(Radiant);WeaponDamage(2)"
data "Passives" "RIT_RITUAL_WEAPON_RADIANT_PASSIVE"
data "StatusEffectOverride" "f1c5a7d3-c966-4d7f-87b7-376f1e64edbd"

new entry "RIT_RITUAL_WEAPON_RADIANT_PASSIVE"
type "PassiveData"
data "Icon" "None"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsWeaponAttack()"
data "StatsFunctors" "IF(HasPassive('Unlock_Aspect_Growth_1',context.Source) and not SavingThrow(Ability.Constitution, 18)):ApplyStatus(DAZED,100,1)"

new entry "RIT_RITUAL_WEAPON_CASTER"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hacrc002bla00000000000000000000000001;1"
data "Description" "hacrc002bla00000000000000000000000003;1"
data "DescriptionParams" "1"
data "Icon" "RIT_Skill_RitualWeapon"
data "SoundLoop" ""
data "SoundStop" "Spell_Status_MagicWeapon_MO_Stop"
data "StackId" "BOUND_WEAPON"
data "StackPriority" "0"
data "IsUnique" "1"
data "Boosts" "AttackSpellOverride(Target_ArcaneStrike, Target_MainHandAttack);UnlockSpell(Projectile_ArcaneBolt);UnlockSpell(Target_ArcaneStrike);UnlockSpell(Target_RIT_Bloodritual)"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusPropertyFlags" "IgnoreResting;DisableCombatlog;DisableOverhead;DisablePortraitIndicator;FreezeDuration;IgnoreRestin"


// BLOOD RITUAL

new entry "Target_RIT_Bloodritual"
type "SpellData"
data "SpellType" "Target"
using "Target_PiercingThrust"
data "SpellSuccess" "ApplyStatus(SWAP, RESTORE_ESSENCE, 100, 0);SwitchDeathType(Explode)"
data "TargetConditions" "IsTargetableCorpse()"
data "Icon" "RIT_Skill_BloodRitual"
data "DisplayName" "hacrc004bla00000000000000000000000001;1"
data "Description" "hacrc004bla00000000000000000000000002;1"
data "DescriptionParams" ""
data "ExtraDescription" ""
data "RequirementConditions" "not HasActionResource('EssencePoints', 4, 0, false, false, context.Source)"
data "Cooldown" ""
data "TooltipStatusApply" ""
data "CastSound" "Action_Cast_PommelStrike"
data "TargetSound" "Action_Impact_Weapon_Taxblade"
data "SpellFlags" "IsSpell;HasVerbalComponent;IsHarmful;IsMelee"
data "PrepareEffect" "4efc21ba-bd1c-4d86-97a7-549c839d21d7"
data "TargetEffect" "80d3ad8f-f14f-406b-b851-501dae1d5de3"
data "HitEffect" "501957b2-c700-4105-bdcd-4fbe0dc0b959"
data "Sheathing" "Melee"


// RITUALIST SPELL AUGMENTATIONS

new entry "Augmentation_Quickened"
type "PassiveData"
data "DisplayName" "hacrc001aug00000000000000000000000001;1"
data "Description" "hacrc001aug00000000000000000000000002;2"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_FastHands"
data "EnabledConditions" "HasActionResource('EssencePoints', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "Boosts" "UnlockSpellVariant((SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike') or SpellId('Target_Turret_Ice') or SpellId('Target_Turret_Fire') or SpellId('Target_Turret_Earth')),ModifyUseCosts(Add,EssencePoints,2,0),ModifyUseCosts(Replace,BonusActionPoint,1,0,ActionPoint));"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Quickened_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "Augmentation_Forked"
type "PassiveData"
data "DisplayName" "hacrc002aug00000000000000000000000001;1"
data "Description" "hacrc002aug00000000000000000000000002;2"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_Generic_Tactical"
data "EnabledConditions" "HasActionResource('EssencePoints', 2, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike'),ModifyUseCosts(Add,EssencePoints,3,0),ModifyNumberOfTargets(AdditiveBase,2,false));UnlockSpellVariant((SpellId('Target_Turret_Ice') or SpellId('Target_Turret_Fire') or SpellId('Target_Turret_Earth')),ModifyUseCosts(Add,EssencePoints,3,0),ModifyNumberOfTargets(AdditiveBase,2,false))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Quickened_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "Augmentation_Silent"
type "PassiveData"
data "DisplayName" "hacrc003aug00000000000000000000000001;1"
data "Description" "hacrc003aug00000000000000000000000002;2"
data "DescriptionParams" "1"
data "Icon" "PassiveFeature_MistyEscape"
data "EnabledConditions" "HasActionResource('EssencePoints', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "Boosts" "UnlockSpellVariant((SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike') or SpellId('Target_Turret_Ice') or SpellId('Target_Turret_Fire') or SpellId('Target_Turret_Earth')),ModifyUseCosts(Add,EssencePoints,1,0),ModifySpellFlags(Verbal,0),ModifySpellFlags(Stealth,1))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Subtle_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "Augmentation_Charged"
type "PassiveData"
data "DisplayName" "hacrc005aug00000000000000000000000001;1"
data "Description" "hacrc005aug00000000000000000000000002;2"
data "Icon" "statIcons_WildMagic_Burning"
data "EnabledConditions" "HasActionResource('EssencePoints', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike')"
data "StatsFunctors" "IF(HasStatus('ISINCARNATE') or HasStatus('ISTURRET')):ApplyStatus(ARCBOLT_CHARGED,100,2);IF(Enemy()):ApplyStatus(SELF,ARCBOLT_CHARGED_SELF,100,2)"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike'),ModifyUseCosts(Add,EssencePoints,1,0))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Distant_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "ARCBOLT_CHARGED"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hacrc005aug00000000000000000000000004;1"
data "Description" "hacrc005aug00000000000000000000000005;1"
data "Icon" "statIcons_WildMagic_Burning"
data "SoundLoop" "Spell_Status_Longstrider_MO"
data "SoundStop" "Spell_Status_Haste_MO_Stop"
data "StackId" "ARCBOLT_CHARGED"
data "StackPriority" "10"
data "Boosts" "ActionResource(ActionPoint,1,0)"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusEffect" "d187f3f9-d301-41f1-93f2-8b159fe905dd"

new entry "ARCBOLT_CHARGED_SELF"
type "StatusData"
data "StatusType" "BOOST"
using "ARCBOLT_CHARGED"
data "Boosts" "ActionResource(BonusActionPoint,1,0)"

new entry "Augmentation_Leashing"
type "PassiveData"
data "DisplayName" "hacrc006aug00000000000000000000000001;1"
data "Description" "hacrc006aug00000000000000000000000002;1"
data "Icon" "statIcons_WildMagic_Barbarian_MagicRetribution"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "SpellId('Projectile_ArcaneBolt')"
data "StatsFunctors" "IF(HasStatus('ISINCARNATE') or HasStatus('ISTURRET')):SpawnExtraProjectiles(Projectile_ConduitBlast_Incarnate)"
data "Boosts" "UnlockSpellVariant(SpellId('Target_ArcaneStrike'),ModifyTargetRadius(Override,6),ModifySpellFlags(Melee,0),ModifyUseCosts(Add,EssencePoints,1,0))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Distant_HeadFX_01:Dummy_HeadFX"
//data "ToggleOffContext" "OnCastResolved"

new entry "Augmentation_Defensive"
type "PassiveData"
data "DisplayName" "hacrc007aug00000000000000000000000001;1"
data "Description" "hacrc007aug00000000000000000000000002;2"
data "DescriptionParams" "1"
data "Icon" "statIcons_WildMagic_Barbarian_ProtectiveLights"
data "EnabledConditions" "HasActionResource('EssencePoints', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike')"
data "StatsFunctors" "IF(HasStatus('ISINCARNATE') or HasStatus('ISTURRET')):ApplyStatus(AUG_DEFENSIVE,100,3);IF(Enemy()):ApplyStatus(SELF,AUG_DEFENSIVE,100,3)"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike'),ModifyUseCosts(Add,EssencePoints,1,0))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Distant_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "AUG_DEFENSIVE"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hacrc007aug00000000000000000000000003;1"
data "Description" "hacrc007aug00000000000000000000000004;1"
data "Icon" "statIcons_WildMagic_Barbarian_ProtectiveLights"
data "SoundLoop" "Spell_Status_Longstrider_MO"
data "SoundStop" "Spell_Status_Haste_MO_Stop"
data "StackId" "AUG_DEFENSIVE"
data "StackPriority" "10"
data "Boosts" "UnlockInterrupt(Interrupt_AUG_Defensive_Parry);UnlockInterrupt(Interrupt_AUG_Defensive_Riposte);AC(2);ActionResourceMultiplier(Movement,1.5,0);MovementSpeedLimit(Walk)"
data "StatusGroups" "SG_RemoveOnRespec"

new entry "Interrupt_AUG_Defensive_Parry"
type "InterruptData"
data "DisplayName" "h91b542c1g106dg4c22gbbd8g01ffa11f1a09;1"
data "Description" "h6702f99ag56f8g4f32ga16eg10e9b42fee5d;1"
data "DescriptionParams" "1d10+5"
data "Icon" "PassiveFeature_Parry"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsMeleeWeaponAttack() and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(1d10+5))"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied"

new entry "Interrupt_AUG_Defensive_Riposte"
type "InterruptData"
using "Interrupt_Riposte"
data "Properties" "UseSpell(SWAP,Target_Riposte_FEAT,true,true,true);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cooldown" "OncePerTurn"
data "Cost" ""

new entry "Target_AUG_Riposte"
type "SpellData"
data "SpellType" "Target"
using "Target_Riposte"
data "SpellSuccess" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"

new entry "Augmentation_Empower"
type "PassiveData"
data "DisplayName" "hacrc008aug00000000000000000000000001;1"
data "Description" "hacrc008aug00000000000000000000000002;2"
data "Icon" "statIcons_WildMagic_TurnMagic"
data "EnabledConditions" "HasActionResource('EssencePoints', 1, 0, false, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike')"
data "StatsFunctors" "IF(HasStatus('ISINCARNATE') or HasStatus('ISTURRET')):ApplyStatus(AUG_EMPOWERED,100,1);IF(Enemy()):ApplyStatus(SELF,AUG_EMPOWERED_SELF,100,2)"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_ArcaneBolt') or SpellId('Target_ArcaneStrike'),ModifyUseCosts(Add,EssencePoints,1,0))"
data "ToggleOnEffect" "VFX_Spells_Cast_Sorcerer_Metamagic_Distant_HeadFX_01:Dummy_HeadFX"
data "ToggleOffContext" "OnCastResolved"

new entry "AUG_EMPOWERED"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hacrc008aug00000000000000000000000003;2"
data "Description" "hacrc008aug00000000000000000000000004;4"
data "Icon" "statIcons_WildMagic_TurnMagic"
data "SoundLoop" "Spell_Status_WeaknessBranding_MO"
data "SoundStop" "Spell_Status_WeaknessBranding_MO_Stop"
data "StackId" "AUG_EMPOWERED"
data "Boosts" "IF(isAttack() or isSpell()):DamageBonus(Owner.SpellCastingAbilityModifier,Force);RollBonus(2)"
data "RemoveEvents" "OnAttack"

new entry "AUG_EMPOWERED_SELF"
type "StatusData"
data "StatusType" "BOOST"
using "AUG_EMPOWERED"
data "Boosts" "IF(isAttack() or isSpell()):CharacterWeaponDamage(SpellCastingAbilityModifier,Force);RollBonus(2)"